<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Planning Poker</title>
    <meta name="viewport" content="initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="shake.js"></script>
</head>
<body>

<ul class="container">
    <li>0</li>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>5</li>
    <li>8</li>
    <li>13</li>
    <li>21</li>
    <li>&infin;</li>
</ul>

<script>
var allCards = document.querySelectorAll('.container li');

function revealFocusedCard() {
    var card = document.querySelector('.container li.focused');
    card.classList.add('highlighted');
    card.classList.remove('focused');
    myShakeEvent.stop();
}

function touchCard(event) {
    var e = event || window.event;
    var element = e.target || e.srcElement;

    if (element.classList.contains('focused')) {
        revealFocusedCard();
    } else if (element.classList.contains('highlighted')) {
        element.classList.remove('highlighted');
    } else {
        element.classList.add('focused');
        myShakeEvent.start();
    }
}

allCards.forEach(function(elem) {
    elem.addEventListener('click', touchCard, true);
});

/* ========================================= */

var myShakeEvent = new Shake({
    threshold: 10
});

window.addEventListener('shake', revealFocusedCard, false);

</script>

</body>
</html>
